<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Hugo 0.36" />
    <meta name="description" content="libpasta - making passwords painless">


    <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
<link rel="icon" href="/images/favicon.png" type="image/x-icon" />

    <title>Algorithm Selection :: libpasta</title>
    
    
    <link href="/css/nucleus.css?1518645205" rel="stylesheet">
    <link href="/css/hybrid.css?1518645205" rel="stylesheet">
    <link href="/css/featherlight.min.css?1518645205" rel="stylesheet">
    <link href="/css/auto-complete.css?1518645205" rel="stylesheet">
    <link href="/css/theme.css?1518645205" rel="stylesheet">
    <link href="/css/hugo-theme.css?1518645205" rel="stylesheet">
    
      <link href="/css/theme-libpasta.css?1518645205" rel="stylesheet">
    

    <script src="/js/jquery-2.x.min.js?1518645205"></script>
    
    <style type="text/css">
      :root #header + #content > #left > #rlblock_left{ 
          display:none !important;
      }
      
    </style>
    
    <script src="/js/tabs.js"></script>
<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400" rel="stylesheet"> 
<link rel="stylesheet" href="https://use.fontawesome.com/a927138ec7.css">

  </head>
  <body class="" data-url="/technical-details/algorithm-choice/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="https://libpasta.github.io/">
<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   id="svg8"
   version="1.1"
   viewBox="0 0 45.997559 10"
   height="12.242269mm"
   width="45.997559mm">
  <defs
     id="defs2" />
  <metadata
     id="metadata5">
    <rdf:RDF>
      <cc:Work
         rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
        <dc:title></dc:title>
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <g
     transform="translate(-66.952891,-67.060878)"
     id="layer1">
    <text
       id="text4487"
       y="100.10173"
       x="68.955536"
       style="font-style:normal;font-weight:normal;font-size:10.58333302px;line-height:125%;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.26458332px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       xml:space="preserve"><tspan
         style="fill:#ffffff;stroke:#FFFFFF;stroke-width:0.26458332px"
         y="76.10173"
         x="68.955536"
         id="tspan4485">libpasta</tspan></text>
  </g>
</svg>

</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fa fa-search"></i></label>
    <input data-search-input id="search-by" type="text" placeholder="Search...">
    <span data-search-clear=""><i class="fa fa-close"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1518645205"></script>
<script type="text/javascript" src="/js/auto-complete.js?1518645205"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/libpasta.github.io\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1518645205"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/introduction/" title="Introduction" class="dd-item 
        
        
        
        ">
      <a href="/introduction/">
          <b>1. </b>Introduction
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/introduction/what-is-libpasta/" title="What is libpasta?" class="dd-item ">
        <a href="/introduction/what-is-libpasta/">
        What is libpasta?
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/introduction/basic-usage/" title="Basic Usage" class="dd-item ">
        <a href="/introduction/basic-usage/">
        Basic Usage
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/introduction/installation/" title="Installation" class="dd-item ">
        <a href="/introduction/installation/">
        Installation
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/introduction/password-hashing-theory/" title="Password hashing theory" class="dd-item ">
        <a href="/introduction/password-hashing-theory/">
        Password hashing theory
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/introduction/alternatives/" title="Alternatives" class="dd-item ">
        <a href="/introduction/alternatives/">
        Alternatives
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/advanced/" title="Advanced Usage" class="dd-item 
        
        
        
        ">
      <a href="/advanced/">
          <b>2. </b>Advanced Usage
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/advanced/keyed/" title="Keyed Hashes" class="dd-item ">
        <a href="/advanced/keyed/">
        Keyed Hashes
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/advanced/migration/" title="Password Migration" class="dd-item ">
        <a href="/advanced/migration/">
        Password Migration
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/advanced/tuning/" title="Tuning &amp; Parameter Selection" class="dd-item ">
        <a href="/advanced/tuning/">
        Tuning &amp; Parameter Selection
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/other-languages/" title="Other Languages" class="dd-item 
        
        
        
        ">
      <a href="/other-languages/">
          <b>3. </b>Other Languages
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/other-languages/overview/" title="Overview" class="dd-item ">
        <a href="/other-languages/overview/">
        Overview
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/other-languages/c/" title="C" class="dd-item ">
        <a href="/other-languages/c/">
        C
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/other-languages/java/" title="Java" class="dd-item ">
        <a href="/other-languages/java/">
        Java
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/other-languages/php/" title="PHP" class="dd-item ">
        <a href="/other-languages/php/">
        PHP
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/other-languages/python/" title="Python" class="dd-item ">
        <a href="/other-languages/python/">
        Python
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/other-languages/ruby/" title="Ruby" class="dd-item ">
        <a href="/other-languages/ruby/">
        Ruby
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/technical-details/" title="Technical Details" class="dd-item 
        parent
        
        
        ">
      <a href="/technical-details/">
          <b>4. </b>Technical Details
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/technical-details/algorithm-choice/" title="Algorithm Selection" class="dd-item active">
        <a href="/technical-details/algorithm-choice/">
        Algorithm Selection
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/technical-details/randomness/" title="Randomness Problems" class="dd-item ">
        <a href="/technical-details/randomness/">
        Randomness Problems
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/technical-details/phc-string-format/" title="Serializing Hashes" class="dd-item ">
        <a href="/technical-details/phc-string-format/">
        Serializing Hashes
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/technical-details/supported/" title="Supported Algorithms" class="dd-item ">
        <a href="/technical-details/supported/">
        Supported Algorithms
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/libpasta-dev/" title="Developing libpasta" class="dd-item 
        
        
        
        ">
      <a href="/libpasta-dev/">
          <b>5. </b>Developing libpasta
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/libpasta-dev/contributing/" title="Contributing" class="dd-item ">
        <a href="/libpasta-dev/contributing/">
        Contributing
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/libpasta-dev/adding-languages/" title="Adding Languages" class="dd-item ">
        <a href="/libpasta-dev/adding-languages/">
        Adding Languages
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h4>More</h4>
        <ul>
          
              <li class="" role=""> 
                  <a class="padding" href="https://libpasta.github.io/blog/"><i class='fa fa-rss'></i> Blog</a>
              </li>
          
              <li class="" role=""> 
                  <a class="padding" href="https://github.com/libpasta/libpasta"><i class='fa fa-github'></i> Github (Rust)</a>
              </li>
          
              <li class="" role=""> 
                  <a class="padding" href="https://docs.rs/libpasta/"><i class='fa fa-book'></i> Documentation (Rust)</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fa fa-heart"></i></a> from <a href="http://getgrav.org">Grav</a> and <a href="http://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable sticky-parent">
              
              <div class="sticky-spacer">
                <div id="top-bar">
                
                  
                  
                  
                  <div id="top-github-link">
                    <a class="github-link" href="https://github.com/libpasta/libpasta-hugo/edit/master/content/technical-details/algorithm-choice.md" target="blank">
                      <i class="fa fa-code-fork"></i>
                      Edit this page
                    </a>
                  </div>
                  
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fa fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
                  
                  <span class="links">
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'>libpasta</a> > <a href='/technical-details/'>Technical Details</a> > Algorithm Selection
          
         
          
         
          
           
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#why-scrypt">Why scrypt?</a>
<ul>
<li><a href="#scrypt-vs-argon2">scrypt vs Argon2</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            

        
        <div id="body-inner">
          
            <h1>Algorithm Selection</h1>
          

        




<p>Currently, we use <a href="https://www.tarsnap.com/scrypt.html">scrypt</a> as the default algorithm in <code>libpasta</code>.
The default parameters are:</p>

<pre><code>N: 2^15
r: 8
p: 1
</code></pre>

<p>This results in a memory requirement of approximately 32MiB and about 0.1
seconds to compute. For many systems, this can be increased, and we suggest
using the <a href="../../advanced/tuning">tuning tools</a> to choose suitable parameters.</p>

<p>For more information on the scrypt parameters, see: <a href="https://blog.filippo.io/the-scrypt-parameters/">https://blog.filippo.io/the-scrypt-parameters/</a></p>

<h2 id="why-scrypt">Why scrypt?</h2>

<p>Scrypt was introduced in 2009 as a memory-hard hash function, designed to
reduce the advantage gained by using custom hardware (e.g. ASICs) over general
purpose CPUs. Recently, it was shown in <a href="https://eprint.iacr.org/2016/989">[ACPRT16]</a> that scrypt is in
fact <em>optimally</em> memory-hard, when measured as the cumulative memory
requirement of the algorithm (i.e., the &ldquo;area&rdquo; of the memory/time graph).
While this result does not comprehensively thwart ASIC attacks, it is a
definite step in the right direction for scrypt.</p>

<p>Other memory-hard hash functions include <a href="https://www.argon2.com/">Argon2</a>, which was the
winner of the recent <a href="https://password-hashing.net/">password hashing competition</a>. Argon2 currently
has three modes: data-dependent Argon2d, data-independent Argon2i, and a mix
of the two, Argon2id.</p>

<p>Both scrypt and Argon2 with <em>decent</em> parameter choices are vastly preferable to
using any of the older algorithms, bcrypt, PBKDF2, etc. Therefore we are mostly
interested in addressing Argon2 vs scrypt.</p>

<h3 id="scrypt-vs-argon2">scrypt vs Argon2</h3>

<p><strong>tl:dr</strong> Argon2 is more modern, with nice features and a higher potential,
but scrypt is the conservative choice.</p>

<p>In detail:</p>

<p>scrypt has been around for longer, giving it more exposure, and more time
to iron out any bugs or kinks. Furthermore, recent theoretical results about
the memory hardness shows scrypt is well-designed and reduces the chance of
a catastrophic failure.</p>

<p>On the other hand, scrypt has two large weaknesses. The algorithm is data-dependent
which means there is the possibility of a side-channel attack (cache
timings across VMs for example). In addition, scrypt has a trivial
time-memory tradeoff attack, which means that ASICs still offer a
significant speedup.</p>

<p>Argon2 was recently chosen as the password-hashing competition winner. It has
easily tunable parameters, and a number of modes suitable for different
purposes. Argon2d is data-dependent and has a higher (potential) memory
hardness, whereas Argon2i is data-independent and aims to eliminate side-
channel attacks. Argon2id combines the two, attempting to offer the best of
both worlds.</p>

<p>However, Argon2 has only recently been developed/specified/implemented and is
still in draft status with the CFRG. Furthermore, there are some
<a href="https://eprint.iacr.org/2016/759">recent attacks</a> which are resulting in tweaking of the recommended
parameter choices. Hence we opt for scrypt as the conservative choice.</p>

<p>Future possibility: support a scrypt-argon2 hybrid mode, e.g.
a few rounds of Argon2i followed by scrypt.</p>


<footer class=" footline" >
	
</footer>


        
        </div> 
      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
        
                    
            
        
        
        


        
            <a class="nav nav-prev" href="/technical-details/" title="Technical Details"> <i class="fa fa-chevron-left"></i></a>
        
        
            <a class="nav nav-next" href="/technical-details/randomness/" title="Randomness Problems" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
        
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1518645205"></script>
    <script src="/js/jquery.sticky-kit.min.js?1518645205"></script>
    <script src="/js/featherlight.min.js?1518645205"></script>
    <script src="/js/html5shiv-printshiv.min.js?1518645205"></script>
    <script src="/js/modernizr.custom.71422.js?1518645205"></script>
    <script src="/js/learn.js?1518645205"></script>
    <script src="/js/hugo-learn.js?1518645205"></script>

    

  </body>
</html>

