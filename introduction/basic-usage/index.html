<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Hugo 0.39" />
    <meta name="description" content="libpasta - making passwords painless">


    <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
<link rel="icon" href="/images/favicon.png" type="image/x-icon" />

    <title>Basic Usage :: libpasta</title>
    
    
    <link href="/css/nucleus.css?1524868828" rel="stylesheet">
    <link href="/css/hybrid.css?1524868828" rel="stylesheet">
    <link href="/css/featherlight.min.css?1524868828" rel="stylesheet">
    <link href="/css/auto-complete.css?1524868828" rel="stylesheet">
    <link href="/css/theme.css?1524868828" rel="stylesheet">
    <link href="/css/hugo-theme.css?1524868828" rel="stylesheet">
    
      <link href="/css/theme-libpasta.css?1524868828" rel="stylesheet">
    

    <script src="/js/jquery-2.x.min.js?1524868828"></script>
    
    <style type="text/css">
      :root #header + #content > #left > #rlblock_left{ 
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    
    <script src="/js/tabs.js"></script>
<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400" rel="stylesheet"> 
<link rel="stylesheet" href="https://use.fontawesome.com/a927138ec7.css">

  </head>
  <body class="" data-url="/introduction/basic-usage/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="https://libpasta.github.io/">
<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   id="svg8"
   version="1.1"
   viewBox="0 0 45.997559 10"
   height="13.242269mm"
   width="45.997559mm">
  <defs
     id="defs2" />
  <metadata
     id="metadata5">
    <rdf:RDF>
      <cc:Work
         rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
        <dc:title></dc:title>
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <g
     id="layer1"
     inkscape:export-xdpi="200"
     inkscape:export-ydpi="200">
    <g
       aria-label="libpasta"
       style="font-style:normal;font-weight:normal;font-size:10.58333302px;line-height:125%;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#ffffff;fill-opacity:1;stroke:#ffffff;stroke-width:0.26458332px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       id="text4487">
      <path
         d="M 0.99735511,1.0608777 H 1.9482014 V 9.1017303 H 0.99735511 Z"
         style="font-style:normal;font-weight:normal;font-size:10.58333302px;line-height:125%;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#ffffff;fill-opacity:1;stroke:#ffffff;stroke-width:0.26458332px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
         id="path849" />
      <path
         d="M 3.9325763,3.3139701 H 4.8834226 V 9.1017303 H 3.9325763 Z m 0,-2.2530924 H 4.8834226 V 2.2649386 H 3.9325763 Z"
         style="font-style:normal;font-weight:normal;font-size:10.58333302px;line-height:125%;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#ffffff;fill-opacity:1;stroke:#ffffff;stroke-width:0.26458332px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
         id="path851" />
      <path
         d="m 11.022583,6.2130179 q 0,-1.0490316 -0.434082,-1.6433105 -0.428915,-0.5994466 -1.1833907,-0.5994466 -0.7544759,0 -1.188558,0.5994466 -0.4289143,0.5942789 -0.4289143,1.6433105 0,1.0490315 0.4289143,1.6484781 0.4340821,0.594279 1.188558,0.594279 0.7544757,0 1.1833907,-0.594279 0.434082,-0.5994466 0.434082,-1.6484781 z M 7.787638,4.1924694 Q 8.0873613,3.6757051 8.5421139,3.4276583 9.0020341,3.1744437 9.6376542,3.1744437 q 1.0541988,0 1.7104898,0.8371582 0.661458,0.8371582 0.661458,2.201416 0,1.3642577 -0.661458,2.2014159 -0.656291,0.8371582 -1.7104898,0.8371582 -0.6356201,0 -1.0955403,-0.2480469 Q 8.0873613,8.7503306 7.787638,8.2335663 v 0.868164 H 6.831624 V 1.0608777 h 0.956014 z"
         style="font-style:normal;font-weight:normal;font-size:10.58333302px;line-height:125%;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#ffffff;fill-opacity:1;stroke:#ffffff;stroke-width:0.26458332px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
         id="path853" />
      <path
         d="M 14.505574,8.2335663 V 11.303146 H 13.549561 V 3.3139701 h 0.956013 v 0.8784993 q 0.299724,-0.5167643 0.754476,-0.7648111 0.459921,-0.2532146 1.095541,-0.2532146 1.054199,0 1.71049,0.8371582 0.661458,0.8371582 0.661458,2.201416 0,1.3642577 -0.661458,2.2014159 -0.656291,0.8371582 -1.71049,0.8371582 -0.63562,0 -1.095541,-0.2480469 -0.454752,-0.2532145 -0.754476,-0.7699788 z m 3.234945,-2.0205484 q 0,-1.0490316 -0.434082,-1.6433105 -0.428914,-0.5994466 -1.18339,-0.5994466 -0.754476,0 -1.188558,0.5994466 -0.428915,0.5942789 -0.428915,1.6433105 0,1.0490315 0.428915,1.6484781 0.434082,0.594279 1.188558,0.594279 0.754476,0 1.18339,-0.594279 0.434082,-0.5994466 0.434082,-1.6484781 z"
         style="font-style:normal;font-weight:normal;font-size:10.58333302px;line-height:125%;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#ffffff;fill-opacity:1;stroke:#ffffff;stroke-width:0.26458332px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
         id="path855" />
      <path
         d="m 22.934,6.1923473 q -1.152384,0 -1.596802,0.2635498 -0.444417,0.2635498 -0.444417,0.8991699 0,0.506429 0.330729,0.8061523 0.335897,0.2945557 0.909505,0.2945557 0.79065,0 1.266073,-0.5581055 0.480591,-0.5632731 0.480591,-1.4934488 V 6.1923473 Z M 24.830525,5.7996064 V 9.1017303 H 23.879679 V 8.223231 Q 23.554117,8.7503306 23.068359,9.0035451 22.5826,9.251592 21.879801,9.251592 q -0.888835,0 -1.415934,-0.4960937 -0.521932,-0.5012614 -0.521932,-1.3384196 0,-0.9766845 0.651123,-1.4727783 0.65629,-0.4960937 1.953369,-0.4960937 h 1.333252 v -0.093018 q 0,-0.6562907 -0.434082,-1.012858 -0.428915,-0.361735 -1.209229,-0.361735 -0.496094,0 -0.966349,0.1188558 -0.470256,0.1188557 -0.904338,0.3565673 V 3.5775199 q 0.521932,-0.2015381 1.012858,-0.2997233 0.490926,-0.1033529 0.956014,-0.1033529 1.255738,0 1.875855,0.6511231 0.620117,0.651123 0.620117,1.9740396 z"
         style="font-style:normal;font-weight:normal;font-size:10.58333302px;line-height:125%;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#ffffff;fill-opacity:1;stroke:#ffffff;stroke-width:0.26458332px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
         id="path857" />
      <path
         d="M 30.483927,3.4845023 V 4.3836722 Q 30.080851,4.1769665 29.646769,4.0736136 29.212687,3.9702608 28.747599,3.9702608 q -0.707967,0 -1.064534,0.217041 -0.3514,0.217041 -0.3514,0.651123 0,0.3307292 0.253215,0.521932 0.253214,0.1860351 1.018025,0.3565673 l 0.325562,0.072347 q 1.012858,0.217041 1.436604,0.6149496 0.428915,0.3927408 0.428915,1.1007079 0,0.8061524 -0.640788,1.2764079 -0.63562,0.4702555 -1.751831,0.4702555 -0.465088,0 -0.971517,-0.093018 -0.501261,-0.08785 -1.059367,-0.2687174 V 7.9080048 q 0.5271,0.2738851 1.038697,0.4134114 0.511596,0.1343588 1.012858,0.1343588 0.671793,0 1.033528,-0.2273763 0.361735,-0.232544 0.361735,-0.6511231 0,-0.3875732 -0.263549,-0.5942789 Q 29.295369,6.776291 28.411702,6.5850882 L 28.080973,6.5075735 Q 27.197306,6.3215384 26.804565,5.9391328 26.411825,5.5515596 26.411825,4.879766 q 0,-0.8164877 0.578776,-1.260905 0.578776,-0.4444173 1.64331,-0.4444173 0.5271,0 0.992188,0.077515 0.465087,0.077515 0.857828,0.2325439 z"
         style="font-style:normal;font-weight:normal;font-size:10.58333302px;line-height:125%;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#ffffff;fill-opacity:1;stroke:#ffffff;stroke-width:0.26458332px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
         id="path859" />
      <path
         d="m 33.253784,1.6706596 v 1.6433105 h 1.958537 v 0.738973 h -1.958537 v 3.141927 q 0,0.7079671 0.191203,0.9095051 0.19637,0.2015381 0.790649,0.2015381 h 0.976685 v 0.795817 h -0.976685 q -1.100708,0 -1.519287,-0.4082438 Q 32.29777,8.2800751 32.29777,7.1948701 V 4.0529431 H 31.600138 V 3.3139701 H 32.29777 V 1.6706596 Z"
         style="font-style:normal;font-weight:normal;font-size:10.58333302px;line-height:125%;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#ffffff;fill-opacity:1;stroke:#ffffff;stroke-width:0.26458332px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
         id="path861" />
      <path
         d="m 39.098389,6.1923473 q -1.152385,0 -1.596802,0.2635498 -0.444417,0.2635498 -0.444417,0.8991699 0,0.506429 0.330729,0.8061523 0.335897,0.2945557 0.909505,0.2945557 0.790649,0 1.266072,-0.5581055 0.480591,-0.5632731 0.480591,-1.4934488 V 6.1923473 Z M 40.994914,5.7996064 V 9.1017303 H 40.044067 V 8.223231 q -0.325561,0.5270996 -0.81132,0.7803141 -0.485758,0.2480469 -1.188558,0.2480469 -0.888834,0 -1.415934,-0.4960937 -0.521932,-0.5012614 -0.521932,-1.3384196 0,-0.9766845 0.651123,-1.4727783 0.656291,-0.4960937 1.953369,-0.4960937 h 1.333252 v -0.093018 q 0,-0.6562907 -0.434082,-1.012858 -0.428914,-0.361735 -1.209228,-0.361735 -0.496094,0 -0.96635,0.1188558 -0.470255,0.1188557 -0.904337,0.3565673 V 3.5775199 q 0.521932,-0.2015381 1.012858,-0.2997233 0.490926,-0.1033529 0.956014,-0.1033529 1.255737,0 1.875854,0.6511231 0.620118,0.651123 0.620118,1.9740396 z"
         style="font-style:normal;font-weight:normal;font-size:10.58333302px;line-height:125%;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#ffffff;fill-opacity:1;stroke:#ffffff;stroke-width:0.26458332px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
         id="path863" />
    </g>
  </g>
</svg>

</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fa fa-search"></i></label>
    <input data-search-input id="search-by" type="text" placeholder="Search...">
    <span data-search-clear=""><i class="fa fa-close"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1524868828"></script>
<script type="text/javascript" src="/js/auto-complete.js?1524868828"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/libpasta.github.io\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1524868828"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/introduction/" title="Introduction" class="dd-item 
        parent
        
        
        ">
      <a href="/introduction/">
          <b>1. </b>Introduction
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/introduction/what-is-libpasta/" title="What is libpasta?" class="dd-item ">
        <a href="/introduction/what-is-libpasta/">
        What is libpasta?
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/introduction/basic-usage/" title="Basic Usage" class="dd-item active">
        <a href="/introduction/basic-usage/">
        Basic Usage
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/introduction/installation/" title="Installation" class="dd-item ">
        <a href="/introduction/installation/">
        Installation
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/introduction/password-hashing-theory/" title="Password hashing theory" class="dd-item ">
        <a href="/introduction/password-hashing-theory/">
        Password hashing theory
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/introduction/alternatives/" title="Alternatives" class="dd-item ">
        <a href="/introduction/alternatives/">
        Alternatives
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/advanced/" title="Advanced Usage" class="dd-item 
        
        
        
        ">
      <a href="/advanced/">
          <b>2. </b>Advanced Usage
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/advanced/keyed/" title="Keyed Hashes" class="dd-item ">
        <a href="/advanced/keyed/">
        Keyed Hashes
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/advanced/migration/" title="Password Migration" class="dd-item ">
        <a href="/advanced/migration/">
        Password Migration
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/advanced/tuning/" title="Tuning &amp; Parameter Selection" class="dd-item ">
        <a href="/advanced/tuning/">
        Tuning &amp; Parameter Selection
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/other-languages/" title="Other Languages" class="dd-item 
        
        
        
        ">
      <a href="/other-languages/">
          <b>3. </b>Other Languages
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/other-languages/overview/" title="Overview" class="dd-item ">
        <a href="/other-languages/overview/">
        Overview
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/other-languages/c/" title="C" class="dd-item ">
        <a href="/other-languages/c/">
        C
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/other-languages/java/" title="Java" class="dd-item ">
        <a href="/other-languages/java/">
        Java
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/other-languages/php/" title="PHP" class="dd-item ">
        <a href="/other-languages/php/">
        PHP
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/other-languages/python/" title="Python" class="dd-item ">
        <a href="/other-languages/python/">
        Python
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/other-languages/ruby/" title="Ruby" class="dd-item ">
        <a href="/other-languages/ruby/">
        Ruby
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/technical-details/" title="Technical Details" class="dd-item 
        
        
        
        ">
      <a href="/technical-details/">
          <b>4. </b>Technical Details
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/technical-details/algorithm-choice/" title="Algorithm Selection" class="dd-item ">
        <a href="/technical-details/algorithm-choice/">
        Algorithm Selection
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/technical-details/randomness/" title="Randomness Problems" class="dd-item ">
        <a href="/technical-details/randomness/">
        Randomness Problems
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/technical-details/phc-string-format/" title="Serializing Hashes" class="dd-item ">
        <a href="/technical-details/phc-string-format/">
        Serializing Hashes
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/technical-details/supported/" title="Supported Algorithms" class="dd-item ">
        <a href="/technical-details/supported/">
        Supported Algorithms
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/libpasta-dev/" title="Developing libpasta" class="dd-item 
        
        
        
        ">
      <a href="/libpasta-dev/">
          <b>5. </b>Developing libpasta
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/libpasta-dev/contributing/" title="Contributing" class="dd-item ">
        <a href="/libpasta-dev/contributing/">
        Contributing
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/libpasta-dev/adding-languages/" title="Adding Languages" class="dd-item ">
        <a href="/libpasta-dev/adding-languages/">
        Adding Languages
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h4>More</h4>
        <ul>
          
              <li class="" role=""> 
                  <a class="padding" href="https://libpasta.github.io/blog/"><i class='fa fa-rss'></i> Blog</a>
              </li>
          
              <li class="" role=""> 
                  <a class="padding" href="https://github.com/libpasta/libpasta"><i class='fa fa-github'></i> Github (Rust)</a>
              </li>
          
              <li class="" role=""> 
                  <a class="padding" href="https://docs.rs/libpasta/"><i class='fa fa-book'></i> Documentation (Rust)</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <br>
<br>
<br>

<p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fa fa-heart"></i></a> from <a href="http://getgrav.org">Grav</a>,
<a href="http://gohugo.io/">Hugo</a><br> and <a href="https://learn.netlify.com/en/">Hugo-theme-learn</a></p>

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable sticky-parent">
              
              <div class="sticky-spacer">
                <div id="top-bar">
                
                  
                  
                  
                  <div id="top-github-link">
                    <a class="github-link" href="https://github.com/libpasta/libpasta-hugo/edit/master/content/introduction/basic-usage.md" target="blank">
                      <i class="fa fa-code-fork"></i>
                      Edit this page
                    </a>
                  </div>
                  
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fa fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
                  
                  <span class="links">
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'>libpasta</a> > <a href='/introduction/'>Introduction</a> > Basic Usage
          
         
          
         
          
           
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#password-hashes">Password Hashes</a>
<ul>
<li><a href="#verifying-passwords">Verifying passwords</a></li>
<li><a href="#password-migration">Password migration</a></li>
<li><a href="#basic-configuration">Basic configuration</a></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            

        
        <div id="body-inner">
          
            <h1>Basic Usage</h1>
          

        




<p>Here we give an overview of the core functionality of libpasta. Examples can
be viewed in different languages, with the full list of language support
found in <a href="../../other-languages/">other languages</a>.</p>

<p>The full Rust API documentation can be found <a href="https://docs.rs/libpasta/">here</a>.</p>

<h3 id="password-hashes">Password Hashes</h3>

<p>A common scenario is that a particular user has password, which a service will check on each login to authenticate the user.</p>

<div>




<div class="code-tab hash"> 
<div class="tab">




<button class="tablinks " onclick="changeTab(event, 'hash', 'Java')">Java</button>





<button class="tablinks " onclick="changeTab(event, 'hash', 'Python')">Python</button>





<button class="tablinks " onclick="changeTab(event, 'hash', 'Ruby')">Ruby</button>





<button class="tablinks active" onclick="changeTab(event, 'hash', 'Rust')">Rust</button>


</div>
<div class="tab-pane"><div class="tabcontent Java" style="display: none" ><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">import</span> io.github.libpasta.pasta<span style="color:#f92672">;</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">hash</span> <span style="color:#f92672">{</span>
  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String argv<span style="color:#f92672">[])</span> <span style="color:#f92672">{</span>
    String password  <span style="color:#f92672">=</span> pasta<span style="color:#f92672">.</span><span style="color:#a6e22e">read_password</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Please enter your password:&#34;</span><span style="color:#f92672">);</span>
<span style="display:block;width:100%;background-color:#3c3d38">    String hash <span style="color:#f92672">=</span> pasta<span style="color:#f92672">.</span><span style="color:#a6e22e">hash_password</span><span style="color:#f92672">(</span>password<span style="color:#f92672">);</span>
</span>    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;The hashed password is: &#34;</span> <span style="color:#f92672">+</span> hash<span style="color:#f92672">);</span>
  <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span></code></pre></div></div>

<div class="tabcontent Python" style="display: none" ><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">from</span> libpasta <span style="color:#f92672">import</span> <span style="color:#f92672">*</span>

password <span style="color:#f92672">=</span> read_password(<span style="color:#e6db74">&#34;Please enter your password:&#34;</span>)
<span style="display:block;width:100%;background-color:#3c3d38">hash <span style="color:#f92672">=</span>  hash_password(password)
</span><span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;The hashed password is: &#34;</span>, hash)
</code></pre></div></div>

<div class="tabcontent Ruby" style="display: none" ><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby">require <span style="color:#e6db74">&#39;libpasta&#39;</span>

password <span style="color:#f92672">=</span> <span style="color:#66d9ef">Pasta</span><span style="color:#f92672">::</span>read_password <span style="color:#e6db74">&#34;Please enter your password:&#34;</span>
<span style="display:block;width:100%;background-color:#3c3d38">hash <span style="color:#f92672">=</span> <span style="color:#66d9ef">Pasta</span><span style="color:#f92672">::</span>hash_password(password)
</span>puts <span style="color:#e6db74">&#34;The hashed password is: &#34;</span>, hash
</code></pre></div></div>

<div class="tabcontent Rust" style="display: block" ><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">extern</span> <span style="color:#66d9ef">crate</span> libpasta;

<span style="color:#75715e">// We re-export the rpassword crate for CLI password input.
</span><span style="color:#75715e"></span><span style="color:#66d9ef">use</span> libpasta::rpassword::<span style="color:#f92672">*</span>;

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#66d9ef">let</span> password <span style="color:#f92672">=</span> prompt_password_stdout(<span style="color:#e6db74">&#34;Please enter your password:&#34;</span>).unwrap();
<span style="display:block;width:100%;background-color:#3c3d38">    <span style="color:#66d9ef">let</span> password_hash <span style="color:#f92672">=</span> libpasta::hash_password(<span style="color:#f92672">&amp;</span>password);
</span>    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;The hashed password is: &#39;{}&#39;&#34;</span>, password_hash);
}</code></pre></div></div>
 </div></div>

</div>

<p>The above code randomly generates a salt, and outputs the hash in the following format:
<code>$$scrypt-mcf$log_n=14,r=8,p=1$pfJFg/hVSthuA5l...</code>.</p>

<p>Details for how this is serialized can be found in the <a href="../../technical-details/phc-string-format/">technical details chapter</a>. This adheres to libpasta&rsquo;s <a href="../what-is-libpasta#secure-by-default">strong defaults</a> principle.</p>

<p>However, for using <code>libpasta</code> one only needs to know that <code>hash_password</code>
outputs a variable-length string.</p>

<h4 id="verifying-passwords">Verifying passwords</h4>

<p>Now that you have the hashed output, verifying that an inputted password is correct can be done as follows:</p>

<div>




<div class="code-tab verify"> 
<div class="tab">




<button class="tablinks " onclick="changeTab(event, 'verify', 'Java')">Java</button>





<button class="tablinks " onclick="changeTab(event, 'verify', 'Python')">Python</button>





<button class="tablinks " onclick="changeTab(event, 'verify', 'Ruby')">Ruby</button>





<button class="tablinks active" onclick="changeTab(event, 'verify', 'Rust')">Rust</button>


</div>
<div class="tab-pane"><div class="tabcontent Java" style="display: none" ><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">import</span> io.github.libpasta.pasta<span style="color:#f92672">;</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">verify</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> String password_hash<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">authUser</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        String password <span style="color:#f92672">=</span> pasta<span style="color:#f92672">.</span><span style="color:#a6e22e">read_password</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Enter password:&#34;</span><span style="color:#f92672">);</span>
<span style="display:block;width:100%;background-color:#3c3d38">        <span style="color:#66d9ef">if</span><span style="color:#f92672">(</span>pasta<span style="color:#f92672">.</span><span style="color:#a6e22e">verify_password</span><span style="color:#f92672">(</span>self<span style="color:#f92672">.</span><span style="color:#a6e22e">password_hash</span><span style="color:#f92672">,</span> password<span style="color:#f92672">))</span> <span style="color:#f92672">{</span>
</span>            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;The password is correct!&#34;</span><span style="color:#f92672">);</span>
            <span style="color:#75715e">// ~&gt; Handle correct password
</span><span style="color:#75715e"></span>        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">{</span>
            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Incorrect password.&#34;</span><span style="color:#f92672">);</span>
            <span style="color:#75715e">// ~&gt; Handle incorrect password
</span><span style="color:#75715e"></span>        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div></div>

<div class="tabcontent Python" style="display: none" ><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">from</span> libpasta <span style="color:#f92672">import</span> <span style="color:#f92672">*</span>

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">User</span>:
    password_hash <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>

    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">auth_user</span>():
        password <span style="color:#f92672">=</span> read_password(<span style="color:#e6db74">&#34;Enter password:&#34;</span>)
<span style="display:block;width:100%;background-color:#3c3d38">        <span style="color:#66d9ef">if</span> verify_password(self<span style="color:#f92672">.</span>password_hash, password):
</span>            <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;The password is correct!&#34;</span>)
            <span style="color:#75715e"># ~&gt; Handle correct password</span>
        <span style="color:#66d9ef">else</span>:
            <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;Incorrect password.&#34;</span>)
            <span style="color:#75715e"># ~&gt; Handle incorrect password</span>
</code></pre></div></div>

<div class="tabcontent Ruby" style="display: none" ><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby">require <span style="color:#e6db74">&#39;libpasta&#39;</span>

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">User</span>
    <span style="color:#66d9ef">attr_accessor</span> <span style="color:#e6db74">:pw_hash</span>
    @pw_hash <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>

    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">auth_user</span>
        password <span style="color:#f92672">=</span> <span style="color:#66d9ef">Pasta</span><span style="color:#f92672">::</span>read_password(<span style="color:#e6db74">&#34;Enter password: &#34;</span>)
<span style="display:block;width:100%;background-color:#3c3d38">        <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">Pasta</span><span style="color:#f92672">::</span>verify_password(self<span style="color:#f92672">.</span>pw_hash, password)
</span>            puts <span style="color:#e6db74">&#34;The password is correct!&#34;</span>
            <span style="color:#75715e"># ~&gt; Handle correct password</span>
        <span style="color:#66d9ef">else</span>
            puts <span style="color:#e6db74">&#34;Incorrect password.&#34;</span>
            <span style="color:#75715e"># ~&gt; Handle incorrect password</span>
        <span style="color:#66d9ef">end</span>
    <span style="color:#66d9ef">end</span>
<span style="color:#66d9ef">end</span>
</code></pre></div></div>

<div class="tabcontent Rust" style="display: block" ><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">extern</span> <span style="color:#66d9ef">crate</span> libpasta;
<span style="color:#66d9ef">use</span> libpasta::rpassword::<span style="color:#f92672">*</span>;

<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">User</span> {
    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>    password_hash: String,
}

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">auth_user</span>(user: <span style="color:#66d9ef">&amp;</span><span style="color:#a6e22e">User</span>) {
    <span style="color:#66d9ef">let</span> password <span style="color:#f92672">=</span> prompt_password_stdout(<span style="color:#e6db74">&#34;Enter password:&#34;</span>).unwrap();
<span style="display:block;width:100%;background-color:#3c3d38">    <span style="color:#66d9ef">if</span> libpasta::verify_password(<span style="color:#f92672">&amp;</span>user.password_hash, <span style="color:#f92672">&amp;</span>password) {
</span>        println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;The password is correct!&#34;</span>);
        <span style="color:#75715e">// ~&gt; Handle correct password
</span><span style="color:#75715e"></span>    } <span style="color:#66d9ef">else</span> {
        println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;Incorrect password.&#34;</span>);
        <span style="color:#75715e">// ~&gt; Handle incorrect password
</span><span style="color:#75715e"></span>    }
}</code></pre></div></div>
 </div></div>

</div>

<h4 id="password-migration">Password migration</h4>

<p>One of the key features of <code>libpasta</code> is the ability to easily migrate passwords
to new algorithms.</p>

<p>Suppose we previously have bcrypt hashes in the following form:
<code>$2a$10$175ikf/E6E.73e83....</code>.
This a bcrypt hash, structured as <code>$&lt;bcrypt identifier&gt;$&lt;cost&gt;$&lt;salthash&gt;</code>.</p>

<p><code>libpasta</code> includes a simple work flow for migrating passwords to a new
algorithm (or new parameterization of an existing algorithm).<br />
First, wrap existing hashes in the new algorithm to ensure their
security immediately. Second, as users log in, update the wrapped hashes to just
use the new algorithm. Wrapping simply takes an existing hash and re-hashes it
with the new algorithm.</p>

<p>The following code first wraps an existing hash, and then a move to just using
the new algorithm:</p>

<div>




<div class="code-tab migrate"> 
<div class="tab">




<button class="tablinks " onclick="changeTab(event, 'migrate', 'Java')">Java</button>





<button class="tablinks " onclick="changeTab(event, 'migrate', 'Python')">Python</button>





<button class="tablinks " onclick="changeTab(event, 'migrate', 'Ruby')">Ruby</button>





<button class="tablinks active" onclick="changeTab(event, 'migrate', 'Rust')">Rust</button>


</div>
<div class="tab-pane"><div class="tabcontent Java" style="display: none" ><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">import</span> io.github.libpasta.pasta<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> io.github.libpasta.HashUpdate<span style="color:#f92672">;</span>

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">User</span> <span style="color:#f92672">{</span>
    String pw_hash<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">auth_user</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        String pw <span style="color:#f92672">=</span> pasta<span style="color:#f92672">.</span><span style="color:#a6e22e">read_password</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Enter password:&#34;</span><span style="color:#f92672">);</span>

<span style="display:block;width:100%;background-color:#3c3d38">        HashUpdate res <span style="color:#f92672">=</span> pasta<span style="color:#f92672">.</span><span style="color:#a6e22e">verify_password_update_hash</span><span style="color:#f92672">(</span>pw_hash<span style="color:#f92672">,</span> pw<span style="color:#f92672">);</span>
</span>        <span style="color:#66d9ef">switch</span> <span style="color:#f92672">(</span>res<span style="color:#f92672">.</span><span style="color:#a6e22e">getTag</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">case</span> Updated:
                pw_hash <span style="color:#f92672">=</span> res<span style="color:#f92672">.</span><span style="color:#a6e22e">getUpdated</span><span style="color:#f92672">();</span>
            <span style="color:#66d9ef">case</span> Ok:
                <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">migrate_users</span><span style="color:#f92672">(</span>User<span style="color:#f92672">[]</span> users<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">for</span><span style="color:#f92672">(</span>User user <span style="color:#f92672">:</span> users<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
<span style="display:block;width:100%;background-color:#3c3d38">            HashUpdate res <span style="color:#f92672">=</span> pasta<span style="color:#f92672">.</span><span style="color:#a6e22e">migrate_hash</span><span style="color:#f92672">(</span>user<span style="color:#f92672">.</span><span style="color:#a6e22e">pw_hash</span><span style="color:#f92672">);</span>
</span>            <span style="color:#66d9ef">switch</span> <span style="color:#f92672">(</span>res<span style="color:#f92672">.</span><span style="color:#a6e22e">getTag</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
                <span style="color:#66d9ef">case</span> Updated:
                    user<span style="color:#f92672">.</span><span style="color:#a6e22e">pw_hash</span> <span style="color:#f92672">=</span> res<span style="color:#f92672">.</span><span style="color:#a6e22e">getUpdated</span><span style="color:#f92672">();</span>
                <span style="color:#66d9ef">case</span> Ok:
                    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Password correct&#34;</span><span style="color:#f92672">);</span> <span style="color:#66d9ef">break</span><span style="color:#f92672">;</span>
                <span style="color:#66d9ef">case</span> Failed:
                    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Password incorrect&#34;</span><span style="color:#f92672">);</span>
            <span style="color:#f92672">}</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>

<span style="color:#f92672">}</span>
</code></pre></div></div>

<div class="tabcontent Python" style="display: none" ><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">from</span> libpasta <span style="color:#f92672">import</span> <span style="color:#f92672">*</span>

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">User</span>:
    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">auth_user</span>(self):
        pw <span style="color:#f92672">=</span> read_password(<span style="color:#e6db74">&#34;Enter password&#34;</span>)
<span style="display:block;width:100%;background-color:#3c3d38">        res <span style="color:#f92672">=</span> verify_password_update_hash(self<span style="color:#f92672">.</span>pw_hash, pw)
</span>        <span style="color:#66d9ef">if</span> res<span style="color:#f92672">.</span>tag <span style="color:#f92672">==</span> HashUpdate<span style="color:#f92672">.</span>Updated:
            self<span style="color:#f92672">.</span>pw_hash <span style="color:#f92672">=</span> res<span style="color:#f92672">.</span>Updated
            <span style="color:#66d9ef">return</span> true
        <span style="color:#66d9ef">elif</span> res<span style="color:#f92672">.</span>tag <span style="color:#f92672">==</span> HashUpdate<span style="color:#f92672">.</span>Ok:
            <span style="color:#66d9ef">return</span> true
        <span style="color:#66d9ef">else</span>:
            <span style="color:#66d9ef">return</span> false

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">migrate_users</span>(users):
    <span style="color:#66d9ef">for</span> user <span style="color:#f92672">in</span> users:
<span style="display:block;width:100%;background-color:#3c3d38">        res <span style="color:#f92672">=</span> migrate_hash(user<span style="color:#f92672">.</span>pw_hash)
</span>        <span style="color:#66d9ef">if</span> res<span style="color:#f92672">.</span>tag <span style="color:#f92672">==</span> HashUpdate<span style="color:#f92672">.</span>Updated:
            user<span style="color:#f92672">.</span>pw_hash <span style="color:#f92672">=</span> res<span style="color:#f92672">.</span>updated
</code></pre></div></div>

<div class="tabcontent Ruby" style="display: none" ><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby">require <span style="color:#e6db74">&#39;libpasta&#39;</span>

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">User</span>
    <span style="color:#66d9ef">attr_accessor</span> <span style="color:#e6db74">:pw_hash</span>
    @pw_hash <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>


    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">auth_user</span>
        pw <span style="color:#f92672">=</span> <span style="color:#66d9ef">Pasta</span><span style="color:#f92672">::</span>read_password(<span style="color:#e6db74">&#34;Enter password: &#34;</span>)
<span style="display:block;width:100%;background-color:#3c3d38">        res <span style="color:#f92672">=</span> <span style="color:#66d9ef">Pasta</span><span style="color:#f92672">::</span>verify_password_update_hash(self<span style="color:#f92672">.</span>pw_hash, pw)
</span>        <span style="color:#66d9ef">case</span> res<span style="color:#f92672">.</span>tag
        <span style="color:#66d9ef">when</span> <span style="color:#66d9ef">Pasta</span><span style="color:#f92672">::</span><span style="color:#66d9ef">HashUpdate</span><span style="color:#f92672">::</span><span style="color:#66d9ef">Updated</span>
            self<span style="color:#f92672">.</span>pw_hash <span style="color:#f92672">=</span> res<span style="color:#f92672">.</span>updated
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>
        <span style="color:#66d9ef">when</span>  <span style="color:#66d9ef">Pasta</span><span style="color:#f92672">::</span><span style="color:#66d9ef">HashUpdate</span><span style="color:#f92672">::</span><span style="color:#66d9ef">Ok</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>
        <span style="color:#66d9ef">else</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>
        <span style="color:#66d9ef">end</span>
    <span style="color:#66d9ef">end</span>
<span style="color:#66d9ef">end</span>

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">migrate_users</span>(users)
    <span style="color:#66d9ef">for</span> user <span style="color:#66d9ef">in</span> users <span style="color:#66d9ef">do</span>
<span style="display:block;width:100%;background-color:#3c3d38">        res <span style="color:#f92672">=</span> <span style="color:#66d9ef">Pasta</span><span style="color:#f92672">::</span>migrate_hash(user<span style="color:#f92672">.</span>pw_hash)
</span>        <span style="color:#66d9ef">if</span> res<span style="color:#f92672">.</span>tag<span style="color:#f92672">.</span>eql? <span style="color:#66d9ef">Pasta</span><span style="color:#f92672">::</span><span style="color:#66d9ef">HashUpdate</span><span style="color:#f92672">::</span><span style="color:#66d9ef">Updated</span>
            user<span style="color:#f92672">.</span>pw_hash <span style="color:#f92672">=</span> res<span style="color:#f92672">.</span>updated
        <span style="color:#66d9ef">end</span>
    <span style="color:#66d9ef">end</span>
<span style="color:#66d9ef">end</span>

</code></pre></div></div>

<div class="tabcontent Rust" style="display: block" ><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">extern</span> <span style="color:#66d9ef">crate</span> libpasta;
<span style="color:#66d9ef">use</span> libpasta::rpassword::<span style="color:#f92672">*</span>;
<span style="color:#66d9ef">use</span> libpasta::{migrate_hash, HashUpdate};

<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">User</span> {
    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>    password_hash: String,
}

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">migrate_users</span>(users: Vec<span style="color:#f92672">&lt;&amp;</span><span style="color:#66d9ef">mut</span> User<span style="color:#f92672">&gt;</span>) {
    <span style="color:#75715e">// Step 1: Wrap old hash
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">for</span> user <span style="color:#66d9ef">in</span> users {
        <span style="color:#66d9ef">let</span> hash <span style="color:#f92672">=</span> user.password_hash;
<span style="display:block;width:100%;background-color:#3c3d38">        <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">let</span> HashUpdate::Verified(Some(new_hash)) <span style="color:#f92672">=</span> migrate_hash(hash) {
</span>            user.password_hash <span style="color:#f92672">=</span> new_hash;
        }
    }
}

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">auth_user</span>(user: <span style="color:#66d9ef">&amp;</span><span style="color:#a6e22e">mut</span> User) {
    <span style="color:#75715e">// Step 2: Update algorithm during log in
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> password <span style="color:#f92672">=</span> prompt_password_stdout(<span style="color:#e6db74">&#34;Enter password:&#34;</span>).unwrap();

<span style="display:block;width:100%;background-color:#3c3d38">    <span style="color:#66d9ef">match</span> libpasta::verify_password_update_hash(<span style="color:#f92672">&amp;</span>user.password_hash, password) {
</span>        HashUpdate::Verified(res) <span style="color:#f92672">=&gt;</span> {
            <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">let</span> Some(new_hash) <span style="color:#f92672">=</span> res {
                user.password_hash <span style="color:#f92672">=</span> new_hash;
            }
            println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;Password correct, new hash: </span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">{}&#34;</span>, user.password_hash);
        },
        HashUpdate::Failed <span style="color:#f92672">=&gt;</span> {
            println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;Password incorrect, hash unchanged: </span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">{}&#34;</span>, user.password_hash);
        }
    }
}</code></pre></div></div>
 </div></div>

</div>

<p>In the first step, we do not need the user&rsquo;s password (and can therefore
apply this to all user passwords when desired). However, the password hash is now
comprised of both a bcrypt computation AND an argon2 computation.</p>

<p>In the second step, if the user correctly enters their password, then a new hash
is computed from scratch with a fresh salt using the new algorithm. This
requires updating the stored version of the hash.</p>

<p>More detailed information of password migration can be found
<a href="../../advanced/migration">here</a>.</p>

<h4 id="basic-configuration">Basic configuration</h4>

<p><code>libpasta</code> is designed to work out-of-the box with strong defaults. However,
other configurations are supported through use of the <code>Config</code> object.
In particular, this is necessary to use <a href="../../advanced/keyed">keyed functions</a>.</p>

<p>This comes with the additional overheard that the config must be explicitly
used.</p>

<p>For example, suppose we wish to use bcrypt with <code>cost=15</code> as the default
algorithm.</p>

<div>




<div class="code-tab config"> 
<div class="tab">




<button class="tablinks " onclick="changeTab(event, 'config', 'Java')">Java</button>





<button class="tablinks " onclick="changeTab(event, 'config', 'Python')">Python</button>





<button class="tablinks " onclick="changeTab(event, 'config', 'Ruby')">Ruby</button>





<button class="tablinks active" onclick="changeTab(event, 'config', 'Rust')">Rust</button>


</div>
<div class="tab-pane"><div class="tabcontent Java" style="display: none" ><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">import</span> io.github.libpasta.Bcrypt<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> io.github.libpasta.Config<span style="color:#f92672">;</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">config</span> <span style="color:#f92672">{</span>
  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
    Bcrypt b <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Bcrypt<span style="color:#f92672">(</span>15<span style="color:#f92672">);</span>
    Config cfg <span style="color:#f92672">=</span> Config<span style="color:#f92672">.</span><span style="color:#a6e22e">with_primitive</span><span style="color:#f92672">(</span>b<span style="color:#f92672">);</span>
    String hash <span style="color:#f92672">=</span> cfg<span style="color:#f92672">.</span><span style="color:#a6e22e">hash_password</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;hunter2&#34;</span><span style="color:#f92672">);</span>
    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;The hashed password is: &#34;</span> <span style="color:#f92672">+</span> hash<span style="color:#f92672">);</span>
  <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span></code></pre></div></div>

<div class="tabcontent Python" style="display: none" ><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">from</span> libpasta <span style="color:#f92672">import</span> <span style="color:#f92672">*</span>

config <span style="color:#f92672">=</span> Config<span style="color:#f92672">.</span>with_primitive(Bcrypt(<span style="color:#ae81ff">15</span>))
pw_hash <span style="color:#f92672">=</span> config<span style="color:#f92672">.</span>hash_password(<span style="color:#e6db74">&#34;hunter2&#34;</span>)
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;The hashed password is: &#34;</span>, pw_hash)
</code></pre></div></div>

<div class="tabcontent Ruby" style="display: none" ><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby">require <span style="color:#e6db74">&#39;libpasta&#39;</span>

config <span style="color:#f92672">=</span> <span style="color:#66d9ef">Pasta</span><span style="color:#f92672">::</span><span style="color:#66d9ef">Config</span><span style="color:#f92672">.</span>with_primitive(<span style="color:#66d9ef">Pasta</span><span style="color:#f92672">::</span><span style="color:#66d9ef">Bcrypt</span><span style="color:#f92672">.</span>new(<span style="color:#ae81ff">15</span>))
pw_hash <span style="color:#f92672">=</span> config<span style="color:#f92672">.</span>hash_password(<span style="color:#e6db74">&#34;hunter2&#34;</span>)
puts <span style="color:#e6db74">&#34;The hashed password is: &#34;</span>, pw_hash
</code></pre></div></div>

<div class="tabcontent Rust" style="display: block" ><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">extern</span> <span style="color:#66d9ef">crate</span> libpasta;

<span style="color:#66d9ef">use</span> libpasta::primitives::Bcrypt;
<span style="color:#66d9ef">use</span> libpasta::config::Config;

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#66d9ef">let</span> config <span style="color:#f92672">=</span> Config::with_primitive(Bcrypt::new(<span style="color:#ae81ff">15</span>));
    <span style="color:#66d9ef">let</span> password_hash <span style="color:#f92672">=</span> config.hash_password(<span style="color:#e6db74">&#34;hunter2&#34;</span>);
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;The hashed password is: &#39;{}&#39;&#34;</span>, password_hash);
    <span style="color:#75715e">// Prints bcrypt hash
</span><span style="color:#75715e"></span>}</code></pre></div></div>
 </div></div>

</div>

<p>Additionally, values may be set using a configuration file. Written in YAML,
these look as follows:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">default: Custom
keyed: ~
primitive: 
  id: <span style="color:#e6db74">&#34;scrypt&#34;</span>
  params: 
    ln: <span style="color:#ae81ff">11</span>
    r: <span style="color:#ae81ff">8</span>
    p: <span style="color:#ae81ff">1</span></code></pre></div>
<p>This specifies the algorithm to use, in this case, scrypt. Similar to the above,
to use this config use the <code>Config::from_file</code> method.</p>

<p><code>libpasta</code> also has a <a href="../../advanced/tuning">parameter selection tool</a> which
can optionally output configuration values.</p>


<footer class=" footline" >
	
</footer>


        
        </div> 
      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
        
                    
            
        
        
        


        
            <a class="nav nav-prev" href="/introduction/what-is-libpasta/" title="What is libpasta?"> <i class="fa fa-chevron-left"></i></a>
        
        
            <a class="nav nav-next" href="/introduction/installation/" title="Installation" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
        
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1524868828"></script>
    <script src="/js/jquery.sticky-kit.min.js?1524868828"></script>
    <script src="/js/featherlight.min.js?1524868828"></script>
    <script src="/js/html5shiv-printshiv.min.js?1524868828"></script>
    <script src="/js/modernizr.custom.71422.js?1524868828"></script>
    <script src="/js/learn.js?1524868828"></script>
    <script src="/js/hugo-learn.js?1524868828"></script>

    

  </body>
</html>

